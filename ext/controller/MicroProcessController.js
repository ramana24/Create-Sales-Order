/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/m/MessageBox","sap/ui/core/library","sap/ui/model/resource/ResourceModel","sap/suite/ui/commons/MicroProcessFlow","sap/suite/ui/commons/MicroProcessFlowItem"],function(M,c,R,a,b){"use strict";var r="sap-icon://request";var d="sap-icon://inspection";var s="sap-icon://sales-order";var o=new R({bundleName:"cus.sd.so.create.auto.xtrctns1.i18n.i18n"}).getResourceBundle();var g=function(I,f){var S=f.getState();switch(I){case r:switch(S){case"Success":return[o.getText("extractionPopoverTitle"),o.getText("extractionSuccessContentTitle"),o.getText("extractionSuccessContentDesc")];case"None":return[o.getText("extractionPopoverTitle"),o.getText("extractionInprocessContentTitle"),o.getText("extractionInprocessContentDesc")];case"Error":var A=f.getBindingContext().getObject("SalesOrderRequestLogHandle");var h;var m=f.getBindingContext().getModel().mMessages;if(m instanceof Array){for(var i=0;i<m.length;i++){if(m[i].logHanlde===A){return[o.getText("extractionPopoverTitle"),o.getText("extractionFailedContentTitle"),m[i].Message];}}}if(A){var u="/sap/opu/odata/sap/APL_LOG_MANAGEMENT_SRV/ApplicationLogHeaderSet('"+A+"')/ApplicationLogMessageSet?$filter=Type eq 'E'&$select=Type,Text,Timestamp,HasDetailText,HasLongText&$inlinecount=allpages";var j=new sap.ui.model.json.JSONModel();j.loadData(u,null,false,"GET",false,false,null);h=j.getData();}if(h&&h.d&&h.d.results.length>0){if(m instanceof Array){f.getBindingContext().getModel().mMessages.push({"logHanlde":A,"Message":h.d.results[0].Text});}else{f.getBindingContext().getModel().mMessages=[{"logHanlde":A,"Message":h.d.results[0].Text}];}return[o.getText("extractionPopoverTitle"),o.getText("extractionFailedContentTitle"),h.d.results[0].Text];}else{return[o.getText("extractionPopoverTitle"),o.getText("extractionFailedContentTitle"),o.getText("extractionFailedContentDesc")];}}break;case d:switch(S){case"Success":return[o.getText("cmpltnsPopoverTitle"),o.getText("cmpltnsSuccessContentTitle"),o.getText("cmpltnsSuccessContentDesc")];case"None":return[o.getText("cmpltnsPopoverTitle"),o.getText("cmpltnsInprocessContentTitle"),o.getText("cmpltnsInprocessContentDesc")];case"Error":return[o.getText("cmpltnsPopoverTitle"),o.getText("cmpltnsFailedContentTitle"),o.getText("cmpltnsFailedContentDesc")];}break;case s:switch(S){case"Success":return[o.getText("creationPopoverTitle"),o.getText("creationSuccessContentTitle"),o.getText("creationSuccessContentDesc")];case"Error":return[o.getText("creationPopoverTitle"),o.getText("creationFailedContentTitle"),o.getText("creationFailedContentDesc")];}break;}};var e=function(){return o.getText("close");};return{itemPress:function(E){var i=E.getSource();var I=i.getIcon();var m=new b({state:i.getState(),icon:I});if(I){var p=new sap.m.Popover({contentWidth:"300px",title:g(I,i)[0],content:[new sap.m.HBox({alignItems:"Start",items:[new a({content:m}).addStyleClass("sapUiSmallMarginBegin sapUiSmallMarginEnd "),new sap.m.FlexBox({width:"100%",renderType:"Bare",direction:"Column",items:[new sap.m.Title({level:sap.ui.core.TitleLevel.H1,text:g(I,i)[1]}),new sap.m.Text({text:g(I,i)[2]}).addStyleClass("sapUiSmallMarginBottom sapUiSmallMarginTop")]}).addStyleClass("sapUiTinyMarginTop")]}).addStyleClass("sapUiTinyMargin")],footer:[new sap.m.Toolbar({content:[new sap.m.ToolbarSpacer(),new sap.m.Button({text:e(),press:function(){p.close();}})]})]});if(p&&E.getParameter("item")){p.openBy(E.getParameter("item"));}}},setExtractionStatus:function(f){switch(f){case"A":return"None";case"B":return"Success";case"C":return"Error";default:return null;}},setCompletenessStatus:function(f){switch(f){case"P":return"None";case"S":return"Success";case"E":return"Error";default:return null;}},setCreationStatus:function(f){switch(f){case"S":return"Success";case"F":return"Error";default:return null;}},setExtractionIcon:function(f){if(f){return r;}return null;},setCompletenessIcon:function(f){if(f){return d;}return null;},setCreationIcon:function(f){if(f){return s;}return null;}};});
